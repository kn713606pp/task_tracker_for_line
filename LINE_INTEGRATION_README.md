# LINE è‡ªå‹•å‚¬è¾¦åŠŸèƒ½è¨­å®šæŒ‡å—

## æ¦‚è¿°

æœ¬åŠŸèƒ½æ•´åˆäº† LINE Messaging APIï¼Œè®“æ‚¨å¯ä»¥æ¯æ—¥å®šæ™‚è‡ªå‹•ç™¼é€åˆ°æœŸä»»å‹™å‚¬è¾¦é€šçŸ¥åˆ° LINE ç¾¤çµ„æˆ–å€‹äººã€‚

## åŠŸèƒ½ç‰¹è‰²

- âœ… æ¯æ—¥å®šæ™‚è‡ªå‹•å‚¬è¾¦
- âœ… æ”¯æ´ LINE ç¾¤çµ„èˆ‡å€‹äººè¨Šæ¯
- âœ… è‡ªå‹•å½™æ•´åˆ°æœŸä»»å‹™
- âœ… æ¸¬è©¦ç™¼é€åŠŸèƒ½
- âœ… å¯è‡ªè¨‚å‚¬è¾¦æ™‚é–“

## è¨­å®šæ­¥é©Ÿ

### 1. å–å¾— LINE Channel Access Token

1. å‰å¾€ [LINE Developers Console](https://developers.line.biz/console/)
2. é¸æ“‡æ‚¨çš„ Provider å’Œ Channel
3. é€²å…¥ **Messaging API** é ç±¤
4. åœ¨ **Channel access token** å€æ®µé»æ“Š **Issue** å»ºç«‹æ–°çš„ Token
5. é¸æ“‡ **Long-lived**ï¼ˆé•·æœŸæœ‰æ•ˆçš„ Tokenï¼‰
6. è¤‡è£½ç”Ÿæˆçš„ Token

### 2. è¨­å®š Token

é–‹å•Ÿ `env.js` æª”æ¡ˆï¼Œå°‡ Token å¡«å…¥ï¼š

```javascript
const lineConfig = {
    channelAccessToken: "YOUR_CHANNEL_ACCESS_TOKEN_HERE",
};
```

### 3. å–å¾— LINE æ¥æ”¶è€… ID

#### æ–¹æ³•ä¸€ï¼šç¾¤çµ„ ID

1. å°‡æ‚¨çš„ LINE Bot åŠ å…¥ç›®æ¨™ç¾¤çµ„
2. è«‹æŸäººåœ¨ç¾¤çµ„ä¸­ç™¼é€è¨Šæ¯
3. æŸ¥çœ‹ç€è¦½å™¨çš„ Console æˆ–ç¶²è·¯è«‹æ±‚ï¼Œæ‰¾åˆ°ç¾¤çµ„çš„ Group ID

#### æ–¹æ³•äºŒï¼šå€‹äºº User ID

1. è«‹ä½¿ç”¨è€…å°‡æ‚¨çš„ LINE Bot åŠ ç‚ºå¥½å‹
2. åœ¨èŠå¤©ä¸­ç™¼é€è¨Šæ¯
3. æŸ¥çœ‹ Console æ‰¾åˆ° User ID

**æ³¨æ„**ï¼šæ¨™æº–çš„ LINE Messaging API ç„¡æ³•ç›´æ¥å–å¾—é€™äº› IDï¼Œæ‚¨éœ€è¦åœ¨ä¼ºæœå™¨ç«¯å»ºç«‹ Webhook æ¥æ”¶ä¾†è‡ª LINE çš„è¨Šæ¯ï¼Œå¾ä¸­æå– IDã€‚

### 4. åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­è¨­å®š

1. ç•¶æœ‰åˆ°æœŸä»»å‹™æ™‚ï¼Œé»æ“Š **è‡ªå‹•å‚¬è¾¦è¨­å®š** æŒ‰éˆ•
2. é–‹å•Ÿã€Œå•Ÿç”¨è‡ªå‹•å‚¬è¾¦ã€é–‹é—œ
3. è¨­å®šå‚¬è¾¦æ™‚é–“ï¼ˆä¾‹å¦‚ï¼š09:00ï¼‰
4. é¸æ“‡æ¥æ”¶è€…é¡å‹ï¼ˆç¾¤çµ„æˆ–å€‹äººï¼‰
5. è²¼ä¸Šå‰›æ‰å–å¾—çš„ ID
6. é»æ“Šã€Œæ¸¬è©¦ç™¼é€ã€ç¢ºèªè¨­å®šæ­£ç¢º
7. é»æ“Šã€Œå„²å­˜è¨­å®šã€

## ä½¿ç”¨æ–¹å¼

### è‡ªå‹•å‚¬è¾¦

è¨­å®šå®Œæˆå¾Œï¼Œç³»çµ±å°‡åœ¨æ¯æ—¥æŒ‡å®šæ™‚é–“è‡ªå‹•æª¢æŸ¥æ˜¯å¦æœ‰åˆ°æœŸä»»å‹™ï¼š

- **å·²éæœŸä»»å‹™**ï¼šè¶…éæˆªæ­¢æ—¥æœŸçš„ä»»å‹™
- **ä»Šæ—¥åˆ°æœŸä»»å‹™**ï¼šä»Šæ—¥ç‚ºæˆªæ­¢æ—¥æœŸçš„ä»»å‹™

å¦‚æœç™¼ç¾åˆ°æœŸä»»å‹™ï¼Œç³»çµ±æœƒè‡ªå‹•ç™¼é€å‚¬è¾¦è¨Šæ¯åˆ°æŒ‡å®šçš„ LINE ç¾¤çµ„æˆ–å€‹äººã€‚

### è¨Šæ¯æ ¼å¼ç¯„ä¾‹

```
ğŸ”” ã€ä»»å‹™å‚¬è¾¦é€šçŸ¥ã€‘

âš ï¸ å·²éæœŸä»»å‹™ (2 é …)ï¼š
1. å®Œæˆå­£åº¦å ±å‘Š
   è² è²¬äººï¼šå¼µä¸‰
   æˆªæ­¢æ—¥æœŸï¼š2024/01/15

2. æ›´æ–°å®¢æˆ¶è³‡æ–™
   è² è²¬äººï¼šæå››
   æˆªæ­¢æ—¥æœŸï¼š2024/01/18

ğŸ“… ä»Šæ—¥åˆ°æœŸä»»å‹™ (1 é …)ï¼š
1. æäº¤é€±å ±
   è² è²¬äººï¼šç‹äº”

è«‹å„˜é€Ÿå›å ±é€²åº¦ï¼Œè¬è¬ï¼

---
å·¥ä½œä»»å‹™è¿½è¹¤å¹³å°
```

### æ‰‹å‹•æ¸¬è©¦

åœ¨è¨­å®šé é¢ä¸­ï¼Œé»æ“Šã€Œæ¸¬è©¦ç™¼é€ã€æŒ‰éˆ•ï¼Œæœƒç™¼é€ä¸€å‰‡æ¸¬è©¦è¨Šæ¯ï¼Œç¢ºèªè¨­å®šæ˜¯å¦æ­£ç¢ºã€‚

## æ³¨æ„äº‹é …

### ç€è¦½å™¨éœ€è¦ä¿æŒé–‹å•Ÿ

âš ï¸ **é‡è¦**ï¼šç”±æ–¼æ­¤åŠŸèƒ½æ˜¯åœ¨ç€è¦½å™¨ç«¯é‹è¡Œï¼Œå› æ­¤ï¼š

1. ç€è¦½å™¨è¦–çª—å¿…é ˆä¿æŒé–‹å•Ÿç‹€æ…‹
2. ç€è¦½å™¨æ¨™ç±¤é éœ€è¦ä¿æŒåœ¨å‰å°ï¼ˆå¦‚æœå¯èƒ½çš„è©±ï¼‰
3. ä¸å»ºè­°ä½¿ç”¨ç€è¦½å™¨çš„ç¯€èƒ½æ¨¡å¼

### å»ºè­°ä½¿ç”¨ä¼ºæœå™¨ç«¯æ–¹æ¡ˆ

å°æ–¼ç”Ÿç”¢ç’°å¢ƒï¼Œå»ºè­°ï¼š

1. ä½¿ç”¨é›²ç«¯å‡½æ•¸ï¼ˆå¦‚ Firebase Cloud Functionsã€Google Cloud Functionsï¼‰
2. è¨­å®š Cloud Scheduler å®šæ™‚è§¸ç™¼
3. åœ¨ä¼ºæœå™¨ç«¯åŸ·è¡Œæª¢æŸ¥å’Œç™¼é€é‚è¼¯

é€™æ¨£å¯ä»¥ç¢ºä¿ï¼š
- 24/7 ä¸é–“æ–·é‹è¡Œ
- ä¸å—ç€è¦½å™¨ç‹€æ…‹å½±éŸ¿
- æ›´ç©©å®šå¯é 

## ç–‘é›£æ’è§£

### Token éŒ¯èª¤

å¦‚æœæ”¶åˆ°ã€ŒLINE API éŒ¯èª¤ã€ï¼Œè«‹æª¢æŸ¥ï¼š
- Token æ˜¯å¦æ­£ç¢º
- Token æ˜¯å¦éæœŸï¼ˆLong-lived Token ç†è«–ä¸Šä¸æœƒéæœŸï¼‰
- Token æ˜¯å¦æœ‰ç™¼é€è¨Šæ¯çš„æ¬Šé™

### æ”¶ä¸åˆ°è¨Šæ¯

è«‹ç¢ºèªï¼š
- LINE Bot å·²åŠ å…¥ç¾¤çµ„æˆ–å·²æˆç‚ºå¥½å‹
- æ¥æ”¶è€… ID æ˜¯å¦æ­£ç¢º
- è¨­å®šæ˜¯å¦å·²å„²å­˜ä¸”å·²å•Ÿç”¨è‡ªå‹•å‚¬è¾¦

### å®šæ™‚ä¸åŸ·è¡Œ

æª¢æŸ¥ï¼š
- ç€è¦½å™¨æ˜¯å¦ä¿æŒé–‹å•Ÿ
- æª¢æŸ¥ Console æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
- æ™‚é–“è¨­å®šæ˜¯å¦æ­£ç¢º

## é€²éšèªªæ˜

### å¦‚ä½•å»ºç«‹ Webhook æ¥æ”¶ ID

å¦‚éœ€åœ¨ Web ç’°å¢ƒä¸­å–å¾— LINE IDï¼Œå¯ä»¥ï¼š

1. ä½¿ç”¨ LINE Webhook URLï¼ˆéœ€è¦åœ¨ LINE Developers Console è¨­å®šï¼‰
2. å»ºç«‹ç°¡æ˜“çš„å¾Œç«¯æœå‹™æ¥æ”¶ LINE è¨Šæ¯
3. å¾æ¥æ”¶åˆ°çš„è¨Šæ¯ä¸­æå– Group ID æˆ– User ID

ç¯„ä¾‹ï¼š

```javascript
// LINE æœƒ POST è¨Šæ¯åˆ°æ‚¨çš„ Webhook URL
app.post('/webhook', (req, res) => {
    const events = req.body.events;
    events.forEach(event => {
        if (event.type === 'message') {
            console.log('Group ID:', event.source.groupId);
            console.log('User ID:', event.source.userId);
        }
    });
    res.sendStatus(200);
});
```

### ä½¿ç”¨ Cloud Functions è‡ªå‹•åŒ–

```javascript
// Cloud Functions ç¯„ä¾‹ï¼ˆFirebaseï¼‰
const functions = require('firebase-functions');
const admin = require('firebase-admin');
const axios = require('axios');

admin.initializeApp();

exports.dailyLineReminder = functions.pubsub
    .schedule('0 9 * * *') // æ¯å¤© 09:00 åŸ·è¡Œ
    .onRun(async (context) => {
        // å–å¾—åˆ°æœŸä»»å‹™
        // æ ¼å¼åŒ–è¨Šæ¯
        // ç™¼é€ LINE è¨Šæ¯
        return null;
    });
```

## åƒè€ƒè³‡æº

- [LINE Messaging API æ–‡ä»¶](https://developers.line.biz/zh-hant/docs/messaging-api/)
- [LINE Developers Console](https://developers.line.biz/console/)
- [Firebase Cloud Functions](https://firebase.google.com/docs/functions)

## æ”¯æ´

å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹è¯çµ¡é–‹ç™¼åœ˜éšŠæˆ–æŸ¥çœ‹å®˜æ–¹æ–‡ä»¶ã€‚


